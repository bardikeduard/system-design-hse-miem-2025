## HW: HLD

### 1. Обязательные компоненты (MUST)

| Компонент | Обоснование | Пример |
| :--- | :--- | :--- |
| Load balancer | Распределяет трафик между экземплярами сервисов. Без него невозможно горизонтальное масштабирование и обеспечение SLA. | nginx |
| API gateway | Является единой точкой входа. Инкапсулирует внутреннюю структуру системы, применяет сквозные политики: аутентификация запросов, ограничение скорости, маршрутизация. Важен для безопасности и управляемости микросервисной архитектуры. | Yandex API Gateway |
| CDN | Раздача видеопотока и статики для обеспечения низкой задержки видео (< 2с) для пользователей по всей стране. | Yandex Cloud CDN |
| Кеш | Уменьшает нагрузку на БД для горячих данных. В нашем случае это кеширование состояний активных аукционов, страниц каталога и сессий пользователей. | Redis Cluster |
| Очередь сообщений | Обеспечивает асинхронное взаимодействие между сервисами. Улучшает отказоустойчивость и масштабируемости системы, позволяя обрабатывать пиковые нагрузки без сбоев. | Apache Kafka |
| Identity provider | Централизованная аутентификация (email, госуслуги). Упрощает управление доступом и повышает безопасность, т.к. сервисы не будут хранить пароли. | SSO |
| WAF (web application firewall) | Защита от атак. | Cloudflare WAF |
| CI/CD | Автоматизация сборки, тестирования и развёртывания микросервисов. Снижает риск ошибки при обновлении прода и ускоряет time to market. | GitLab CI/CD |
| Observability | Сбор метрик, логов и трейсов для отладки, поиска узких мест и соблюдения высокого SLA. | Prometheus (метрики) + Loki (логи) + Jaeger (трейсы) + Grafana (визуализация) |
| Резервное копирование | Гарантия восстановления данных в случае сбоя. Требование 152-ФЗ. Необходимо для всех персистентных хранилищ (PostgreSQL, ClickHouse). | wal-g для PostgreSQL, регулярные снапшоты дисков/S3 |

### 2. Рекомендуемые компоненты (SHOULD)

| Компонент | Обоснование | Пример |
| :--- | :--- | :--- |
| Service mesh | Упрощает сетевое взаимодействие между микросервисами. Берет на себя реализацию таймаутов, повторных запросов, балансировки и взаимной аутентификации, очищая код сервисов от этой логики. | Istio, Linkerd |
| Geo DNS | Маршрутизация пользователей к географически ближайшему дата-центру. Снизить сетевую задержку для пользователей в удаленных регионах страны. | Yandex Cloud DNS |
